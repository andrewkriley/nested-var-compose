services:
  server1:
## <--common
    profiles: [all, server1]
    restart: unless-stopped
    security_opt:
    - no-new-privileges:true
    environment:
      - GLOBALVAR1=${GLOBALVAR1}
      - GLOBALVAR2=${GLOBALVAR2}
      - LOCALVAR1=${LOCALVAR1}
      - LOCALVAR2=${LOCALVAR2}
## <--container specific
    container_name: ${LOCALVAR1}
    image: server2
    ports:
      - '8101:8080'
    labels:
      - homepage.group=${GLOBALVAR1}
      - homepage.name=${LOCALVAR1}
      - homepage.icon=${LOCALVAR2}
      - homepage.href=${GLOBALVAR1}
      - homepage.description=${LOCALVAR2}
    #command: printenv GLOBALVAR1 GLOBALVAR2 LOCALVAR1 LOCALVAR2

